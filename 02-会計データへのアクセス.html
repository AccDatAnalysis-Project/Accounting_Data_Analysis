<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 会計データへのアクセス | 会計情報のデータ分析</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 会計データへのアクセス | 会計情報のデータ分析" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 会計データへのアクセス | 会計情報のデータ分析" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="北田智久・濵村純平・井上謙仁　編" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="01-会計情報データを統計分析.html"/>
<link rel="next" href="03-Rの準備.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">目次</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>まえがき</a></li>
<li class="chapter" data-level="1" data-path="01-会計情報データを統計分析.html"><a href="01-会計情報データを統計分析.html"><i class="fa fa-check"></i><b>1</b> 会計情報を統計分析する：必要性と困難性</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-会計情報データを統計分析.html"><a href="01-会計情報データを統計分析.html#会計情報を統計分析するとは"><i class="fa fa-check"></i><b>1.1</b> 「会計情報を統計分析する」とは？</a></li>
<li class="chapter" data-level="1.2" data-path="01-会計情報データを統計分析.html"><a href="01-会計情報データを統計分析.html#実証的な会計研究からの示唆コスト変動研究と利益調整研究"><i class="fa fa-check"></i><b>1.2</b> 実証的な会計研究からの示唆：「コスト変動研究」と「利益調整研究」</a></li>
<li class="chapter" data-level="1.3" data-path="01-会計情報データを統計分析.html"><a href="01-会計情報データを統計分析.html#企業内部で会計情報の統計分析を実施できない理由"><i class="fa fa-check"></i><b>1.3</b> 企業内部で会計情報の統計分析を実施「できない」理由</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-会計データへのアクセス.html"><a href="02-会計データへのアクセス.html"><i class="fa fa-check"></i><b>2</b> 会計データへのアクセス</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-会計データへのアクセス.html"><a href="02-会計データへのアクセス.html#会計データを入手し整理する"><i class="fa fa-check"></i><b>2.1</b> 会計データを入手し，整理する</a></li>
<li class="chapter" data-level="2.2" data-path="02-会計データへのアクセス.html"><a href="02-会計データへのアクセス.html#edinetの使い方"><i class="fa fa-check"></i><b>2.2</b> EDINETの使い方</a></li>
<li class="chapter" data-level="2.3" data-path="02-会計データへのアクセス.html"><a href="02-会計データへのアクセス.html#整然データとは"><i class="fa fa-check"></i><b>2.3</b> 整然データとは</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Rの準備.html"><a href="03-Rの準備.html"><i class="fa fa-check"></i><b>3</b> R・Rstudioの準備と基本操作</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Rの準備.html"><a href="03-Rの準備.html#この章について"><i class="fa fa-check"></i><b>3.1</b> この章について</a></li>
<li class="chapter" data-level="3.2" data-path="03-Rの準備.html"><a href="03-Rの準備.html#インストール"><i class="fa fa-check"></i><b>3.2</b> インストール</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Rの準備.html"><a href="03-Rの準備.html#rのインストール"><i class="fa fa-check"></i><b>3.2.1</b> Rのインストール</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Rの準備.html"><a href="03-Rの準備.html#rstudioのインストール"><i class="fa fa-check"></i><b>3.2.2</b> RStudioのインストール</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-Rの準備.html"><a href="03-Rの準備.html#rstudioの基本操作とrの基礎知識"><i class="fa fa-check"></i><b>3.3</b> RStudioの基本操作とRの基礎知識</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="03-Rの準備.html"><a href="03-Rの準備.html#rstudioの基本操作"><i class="fa fa-check"></i><b>3.3.1</b> RStudioの基本操作</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-Rの準備.html"><a href="03-Rの準備.html#rの基礎知識"><i class="fa fa-check"></i><b>3.3.2</b> Rの基礎知識</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html"><i class="fa fa-check"></i><b>4</b> 会計情報を前処理する</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#この章について-1"><i class="fa fa-check"></i><b>4.1</b> この章について</a></li>
<li class="chapter" data-level="4.2" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#データの読込操作"><i class="fa fa-check"></i><b>4.2</b> データの読込・操作</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#データの読込"><i class="fa fa-check"></i><b>4.2.1</b> データの読込</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#データの操作"><i class="fa fa-check"></i><b>4.2.2</b> データの操作</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#データの結合"><i class="fa fa-check"></i><b>4.3</b> データの結合</a></li>
<li class="chapter" data-level="4.4" data-path="04-会計情報の前処理.html"><a href="04-会計情報の前処理.html#財務指標の作成"><i class="fa fa-check"></i><b>4.4</b> 財務指標の作成</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html"><i class="fa fa-check"></i><b>5</b> 会計情報の可視化</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#この章について-2"><i class="fa fa-check"></i><b>5.1</b> この章について</a></li>
<li class="chapter" data-level="5.2" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#つのグラフを出力する"><i class="fa fa-check"></i><b>5.2</b> 1つのグラフを出力する</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#ggplotの記述方法"><i class="fa fa-check"></i><b>5.2.1</b> ggplotの記述方法</a></li>
<li class="chapter" data-level="5.2.2" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#ヒストグラムと箱ひげ図"><i class="fa fa-check"></i><b>5.2.2</b> ヒストグラムと箱ひげ図</a></li>
<li class="chapter" data-level="5.2.3" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#折れ線グラフ"><i class="fa fa-check"></i><b>5.2.3</b> 折れ線グラフ</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="05-会計情報の可視化.html"><a href="05-会計情報の可視化.html#複数のグラフを出力する"><i class="fa fa-check"></i><b>5.3</b> 複数のグラフを出力する</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html"><i class="fa fa-check"></i><b>6</b> 会計情報を検定する</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#この章について-3"><i class="fa fa-check"></i><b>6.1</b> この章について</a></li>
<li class="chapter" data-level="6.2" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#用語説明"><i class="fa fa-check"></i><b>6.2</b> 用語説明</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#母集団と標本"><i class="fa fa-check"></i><b>6.2.1</b> 母集団と標本</a></li>
<li class="chapter" data-level="6.2.2" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#有意水準"><i class="fa fa-check"></i><b>6.2.2</b> 有意水準</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#t検定"><i class="fa fa-check"></i><b>6.3</b> t検定</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#対応のない二群のt検定"><i class="fa fa-check"></i><b>6.3.1</b> 対応のない二群のt検定</a></li>
<li class="chapter" data-level="6.3.2" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#相関係数"><i class="fa fa-check"></i><b>6.3.2</b> 相関係数</a></li>
<li class="chapter" data-level="6.3.3" data-path="06-会計情報の検定.html"><a href="06-会計情報の検定.html#相関係数の検定"><i class="fa fa-check"></i><b>6.3.3</b> 相関係数の検定</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-単回帰.html"><a href="07-単回帰.html"><i class="fa fa-check"></i><b>7</b> 単回帰分析とCVP分析</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-単回帰.html"><a href="07-単回帰.html#cvp分析とは"><i class="fa fa-check"></i><b>7.1</b> CVP分析とは</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-単回帰.html"><a href="07-単回帰.html#固定費と変動費"><i class="fa fa-check"></i><b>7.1.1</b> 固定費と変動費</a></li>
<li class="chapter" data-level="7.1.2" data-path="07-単回帰.html"><a href="07-単回帰.html#固変分解の方法"><i class="fa fa-check"></i><b>7.1.2</b> 固変分解の方法</a></li>
<li class="chapter" data-level="7.1.3" data-path="07-単回帰.html"><a href="07-単回帰.html#cvp分析における仮定"><i class="fa fa-check"></i><b>7.1.3</b> CVP分析における仮定</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-単回帰.html"><a href="07-単回帰.html#最小二乗法を利用した固変分解"><i class="fa fa-check"></i><b>7.2</b> 最小二乗法を利用した固変分解</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="07-単回帰.html"><a href="07-単回帰.html#データの確認"><i class="fa fa-check"></i><b>7.2.1</b> データの確認</a></li>
<li class="chapter" data-level="7.2.2" data-path="07-単回帰.html"><a href="07-単回帰.html#最小二乗法に関する予備知識"><i class="fa fa-check"></i><b>7.2.2</b> 最小二乗法に関する予備知識</a></li>
<li class="chapter" data-level="7.2.3" data-path="07-単回帰.html"><a href="07-単回帰.html#最小二乗法の実践"><i class="fa fa-check"></i><b>7.2.3</b> 最小二乗法の実践</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-重回帰.html"><a href="08-重回帰.html"><i class="fa fa-check"></i><b>8</b> コストビヘイビアを推定する</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-重回帰.html"><a href="08-重回帰.html#費用構造が変化した場合の費用直線の推定"><i class="fa fa-check"></i><b>8.1</b> 費用構造が変化した場合の費用直線の推定</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08-重回帰.html"><a href="08-重回帰.html#ダミー変数"><i class="fa fa-check"></i><b>8.1.1</b> ダミー変数</a></li>
<li class="chapter" data-level="8.1.2" data-path="08-重回帰.html"><a href="08-重回帰.html#グループごとに固定費のみを変えたい場合"><i class="fa fa-check"></i><b>8.1.2</b> グループごとに固定費のみを変えたい場合</a></li>
<li class="chapter" data-level="8.1.3" data-path="08-重回帰.html"><a href="08-重回帰.html#グループごとに固定費および変動費率を変えたい場合"><i class="fa fa-check"></i><b>8.1.3</b> グループごとに固定費および変動費率を変えたい場合</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08-重回帰.html"><a href="08-重回帰.html#コストドライバー分析"><i class="fa fa-check"></i><b>8.2</b> コストドライバー分析</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="08-重回帰.html"><a href="08-重回帰.html#重回帰分析"><i class="fa fa-check"></i><b>8.2.1</b> 重回帰分析</a></li>
<li class="chapter" data-level="8.2.2" data-path="08-重回帰.html"><a href="08-重回帰.html#残差回帰"><i class="fa fa-check"></i><b>8.2.2</b> 残差回帰</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">ここ何書こうかしら</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">会計情報のデータ分析</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="ch2" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> 会計データへのアクセス</h1>
<pre><code>&lt;学習目標&gt;
・会計データを入手できる
・整然データを構築できる</code></pre>
<p>【応用例】</p>
<ul>
<li>なし</li>
</ul>
<p>【関連する会計研究】</p>
<ul>
<li>Wickham, H. (2014) “Tidy Data,” <em>Journal of Statistical Software</em> Vol. 59, No. 10, pp. 1–23.</li>
</ul>
<div id="会計データを入手し整理する" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> 会計データを入手し，整理する</h2>
<p>会計データを分析するには，何よりもまず会計データを入手する必要がある。
総資産や売上高，あるいは純利益のデータが手元にないと，分析をはじめることすらできない。</p>
<p>学術的研究では，「NEEDS-FinancialQUEST」や「eol」のようなデータベースから，会計データを入手して分析が行われている。
しかし，これらのデータベースは有料である。大学でこれらのデータベースが利用可能でなければ，卒業論文などで利用することは難しい。</p>
<p>もっと手軽にデータを入手する方法はないだろうか。
そこで，本章では，「EDINET」から会計データを無料で，しかもインターネットから簡単に入手する方法について紹介する<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>。</p>
<p>さらに，入手した会計データは，Rに読み込まれ，分析が実施されることになる。
ここで注意をしなければならないのが，収集されたデータがRで読み取りやすい形式になっているかということである。
もし，Rで操作しにくい形式であるならば，効率的な分析が不可能となってしまう。では，どのようなデータの形式が望ましいのだろうか。</p>
<p>したがって，本章では，「整然データ」についても学習することにする。
整然データは，Rなどの統計ソフトで操作のしやすいデータ構造である。整然データは効率的な分析を可能としてくれる。</p>
</div>
<div id="edinetの使い方" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> EDINETの使い方</h2>
<p></p>
<p>まず，各企業の会計データを入手してみよう。
会計データを用いた分析では，各企業が開示する有価証券報告書に記載されている財務数値を用いる。
そのため，会計データの取得には，有価証券報告書を1社ずつ入手し，そこから必要なデータを手作業で収集する事になる。
有価証券報告書は各企業のウェブページの「IR情報」から入手できることが多い。</p>
<p>ただし，複数企業のデータが欲しい場合には，企業のページに1社ずつアクセスして，1社ずつ有価証券報告書を収集する必要がある。
企業のウェブページは，企業ごとに体裁が異なっているため，有価証券報告書を各社ごとに探すという手間がかかってしまう。</p>
<p>もっと手軽に有価証券報告書を入手できる方法はないのだろうか。
そこで利用されるのが，「EDINET」である<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>。</p>
<p>EDINETを利用すれば，企業名を検索するだけで，有価証券報告書を閲覧することができる。
EDINETでも1社ずつ検索する必要はある。しかし，有価証券報告書をいちいち探さなくていい点，収集作業が断然楽になるだろう。</p>
<p>まず，検索サイトで「EDINET」と検索するか，「<a href="http://disclosure.edinet-fsa.go.jp/" class="uri">http://disclosure.edinet-fsa.go.jp/</a>」にアクセスする。すると，図<a href="02-会計データへのアクセス.html#fig:edinet">2.1</a>のようなウェブページが表示される。</p>
<div class="figure" style="text-align: center"><span id="fig:edinet"></span>
<img src="pics_pdf/TK1.1.png" alt="EDINETのトップページ" width="500px" />
<p class="caption">
Figure 2.1: EDINETのトップページ
</p>
</div>
<p>今回は「川崎重工業」に興味を持ったとし，川崎重工業の有価証券報告書を入手してみよう。まず，「書類検索」をクリックする。
すると，図<a href="02-会計データへのアクセス.html#fig:kensaku">2.2</a>のページが表示される。</p>
<div class="figure" style="text-align: center"><span id="fig:kensaku"></span>
<img src="pics_pdf/TK1.2.png" alt="検索画面" width="500px" />
<p class="caption">
Figure 2.2: 検索画面
</p>
</div>
<p>次に，このページの「書類提出者／有価証券発行者／ファンド情報を指定する」の欄の「提出社／発行者／ファンド」に「川崎重工業」と入力する。
また，会計データ分析では，基本的に複数年の有価証券報告書が必要である。そのために，「決算期／提出期間を指定する」の欄を展開し，そこの「提出期間」を「過去1年」から「全期間」に指定する必要がある。これで，EDINETに収録されている最大期間の有価証券報告書が検索できる。</p>
<p>「検索」のボタンを押すと，図<a href="02-会計データへのアクセス.html#fig:kekka">2.3</a>の検索結果が表示される。
「有価証券報告書」の行の「PDF」のアイコンをクリックすると，当該年度の有価証券報告書がPDFファイルの形式でダウンロードできる。
こうして，ダウンロードされた有価証券報告書を閲覧し，必要な財務数値を収集することになる<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>。</p>
<div class="figure" style="text-align: center"><span id="fig:kekka"></span>
<img src="pics_pdf/TK1.3.png" alt="検索結果" width="500px" />
<p class="caption">
Figure 2.3: 検索結果
</p>
</div>
</div>
<div id="整然データとは" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> 整然データとは</h2>
<p></p>
<p>有価証券報告書から取得した財務数値は，一定のデータの形式に並べることになる。
データの形式はさまざま考えられる。
ここでポイントとなるのが，ここで構築されたデータはRで用いられるということだ。
すなわち，Rで扱いやすい形式のデータを構築する必要が出てくる。</p>
<p>では，データはどう並べるのがRでの分析に利用しやすいのだろうか。
ここで登場するのが，「整然データ」である。
整然データとは，
<span class="citation"><a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">Wickham</a> (<a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">2014</a>)</span>
で提唱されたデータ構造のことである。
Rなどの統計ソフトで分析するためには，整然データのルールにしたがってデータを並べることが重要となる。</p>
<p><span class="citation"><a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">Wickham</a> (<a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">2014</a>)</span>
によると，整然データを構築するためには，以下の3つの規則を満たす必要がある<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>。</p>
<ol style="list-style-type: decimal">
<li>それぞれの変数は，自身の列を有していないといけない。</li>
<li>それぞれの観測は，自身の行を有していないといけない。</li>
<li>それぞれの値は，自身のセルを有していないといけない。</li>
</ol>
<p>では，具体的に，整然データの構造をみていこう。
ここでは，川崎重工業，三菱重工業，および住友重機械工業の売上高を2016年度から2018年度までの3年ずつ，合計で9企業年分入手したとする<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>。</p>
<p>その際，図<a href="02-会計データへのアクセス.html#fig:messy">2.4</a>にデータをまとめたとしよう。
このような表はよくみるはずだ。
ここでは，行に企業名を並べ，列に年度を並べて，それぞれの行列に対応するセルに売上高が配置されている<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>。
この表は，企業と年度の対応があるため，我々人間にとっては確認がしやすい。</p>
<div class="figure" style="text-align: center"><span id="fig:messy"></span>
<img src="pics_pdf/TK1.13.png" alt="雑然データの例" width="500px" />
<p class="caption">
Figure 2.4: 雑然データの例
</p>
</div>
<p>しかし，図<a href="02-会計データへのアクセス.html#fig:messy">2.4</a>の形式は，上記の規則3以外守られていないため，整然データとはいえない。
このような整然データでない構造のデータは「雑然データ（messy data）」とよばれる。
雑然データは統計ソフトでは扱いにくい形式であり，分析に使用するのは好ましくない。</p>
<p>図<a href="02-会計データへのアクセス.html#fig:messy">2.4</a>を整然データに並べ替えると，図<a href="02-会計データへのアクセス.html#fig:tidy">2.5</a>のようになる。なぜ，統計ソフトで扱う場合に雑然データではダメなのだろうか。規則を1つずつ確認することでみていこう<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>。</p>
<div class="figure" style="text-align: center"><span id="fig:tidy"></span>
<img src="pics_pdf/TK1.14.png" alt="整然データの例" width="500px" />
<p class="caption">
Figure 2.5: 整然データの例
</p>
</div>
<p>まず，規則1の「それぞれの変数は，自身の列を有していないといけない」である。
変数とは，「企業名」「年度」「売上高」のようなデータを指す。
雑然データを見てみよう。ここで，これら変数は，図<a href="02-会計データへのアクセス.html#fig:messy1">2.6</a>のように企業名が列，年度が行，売上高にいたっては行列に並んでいる。
変数がバラバラに並んでいると，統計ソフトで変数を指定するとき，変数ごとに指定の方法がバラバラになり，コードを書くのがとても大変になる。</p>
<div class="figure" style="text-align: center"><span id="fig:messy1"></span>
<img src="pics_pdf/TK1.15.png" alt="規則1の例：雑然データ" width="500px" />
<p class="caption">
Figure 2.6: 規則1の例：雑然データ
</p>
</div>
<p>そこで，整然データの規則1が有効になる。図<a href="02-会計データへのアクセス.html#fig:tidy1">2.7</a>のように，変数は列に並べる。
こうすることで，ソフト上では，列だけを指定することで変数を取り出すことができる。コードを書くのが楽になるのだ。</p>
<div class="figure" style="text-align: center"><span id="fig:tidy1"></span>
<img src="pics_pdf/TK1.16.png" alt="規則1の例：整然データ" width="500px" />
<p class="caption">
Figure 2.7: 規則1の例：整然データ
</p>
</div>
<p>次に，規則2「それぞれの観測は，自身の行を有していないといけない」である。
観測は「川崎重工業の2018年度」のようにある観測された対象を示す。
ここで，川崎重工業の2018年度の売上高を確認してみよう。図<a href="02-会計データへのアクセス.html#fig:messy2">2.8</a>のように，行と列がそれぞれバラバラに位置されていることがわかる。</p>
<div class="figure" style="text-align: center"><span id="fig:messy2"></span>
<img src="pics_pdf/TK1.17.png" alt="規則2の例：雑然データ" width="500px" />
<p class="caption">
Figure 2.8: 規則2の例：雑然データ
</p>
</div>
<p>統計ソフトに同じことをさせると，1つの観測を抜き出すのに，3箇所の行列の指定をしなければならない。
これは大変なので，図<a href="02-会計データへのアクセス.html#fig:tidy2">2.9</a>のように，1つの観測値は1行に並ぶようにする。
これで，ソフト上で行だけを指定すれば，観測値を取り出すことができる。</p>
<div class="figure" style="text-align: center"><span id="fig:tidy2"></span>
<img src="pics_pdf/TK1.18.png" alt="規則2の例：整然データ" width="500px" />
<p class="caption">
Figure 2.9: 規則2の例：整然データ
</p>
</div>
<p>最後に，規則3「それぞれの値は，独自のセルを有していないといけない」である。
値は「川崎重工業」や「3,914,018」のように観測された企業名や売上高などの内容そのものを指す。
ここで，川崎重工業の2016年の売上高が修正されたとしよう。
これを反映したのが図<a href="02-会計データへのアクセス.html#fig:messy3">2.10</a>であり，下の数値が修正された売上高である。
図<a href="02-会計データへのアクセス.html#fig:messy3">2.10</a>では，1つのセルに売上高が2つ入っている。
このように1つのセルにデータが2つ入っていると，セルを指定した際，売上高が2つ取り出されてしまう。
なので，セルには1つの値しか入れてはいけない。</p>
<div class="figure" style="text-align: center"><span id="fig:messy3"></span>
<img src="pics_pdf/TK1.19.png" alt="規則3の例：雑然データ" width="500px" />
<p class="caption">
Figure 2.10: 規則3の例：雑然データ
</p>
</div>
<p>この例を整然データに直すなら，図<a href="02-会計データへのアクセス.html#fig:tidy3">2.11</a>のように新たに「売上高（修正）」の変数を作り，修正された売上高はそこの列に配置することになる。売上高の修正のない観測は，「売上高（修正）」を「NA」として欠損値で扱っておけば問題ない<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>。</p>
<div class="figure" style="text-align: center"><span id="fig:tidy3"></span>
<img src="pics_pdf/TK1.20.png" alt="規則3の例：整然データ" width="500px" />
<p class="caption">
Figure 2.11: 規則3の例：整然データ
</p>
</div>
<p>以上のように整然データとして構築されたデータは，Rなどの統計ソフトで容易に扱うことができる。
ある1列を指定すればその列の変数が取り出せるし，ある1行を指定すればその行の観測が取り出せる。
また，セルは1つの値しか入ってないので，そのセルを指定するだけで欲しい値を取り出すことができる。
このように，整然データに従ってデータを構築すれば，データ分析を効率的に行うことができるようになる。</p>

<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>財務情報はバフェット・コードといったサイトでも入手可能である。企業の財務情報を収集するのは手間がかかるが，このサイトを利用することで，簡便に企業の財務情報にアクセスできる。<a href="02-会計データへのアクセス.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>金融庁が提供する有価証券報告書等の企業が開示する書類を閲覧できるウェブサイト。過去5年分
の開示書類が収録されている。EDINETは，Electronic Disclosure for Investors’ NETworkの略称。<a href="02-会計データへのアクセス.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>EDINETを利用してデータを自動取得することもできる。ただし，そのためにはウェブ・クローリングに関する知識が必要となる。<a href="02-会計データへのアクセス.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>“12 Tidy data,” R for Data Science,<a href="https://r4ds.had.co.nz/tidy-data.html" class="uri">https://r4ds.had.co.nz/tidy-data.html</a>, 2021年3月10日閲覧。なお，<span class="citation"><a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">Wickham</a> (<a href="08-重回帰.html#ref-W2014JSS" role="doc-biblioref">2014</a>)</span> では，下記の規則3はなく，代わりに「それぞれの種類の観測単位は，ある表を構成する」がある。これは，会計データの分析に必要な財務情報は，バラバラの表にではなく，1つの表に集めなければならない，と解釈できる。<a href="02-会計データへのアクセス.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>「企業年」はある1企業のある1年度の観測値を示す単位である。
「川崎重工業の2018年度」という観測値に対して「1企業年」という数え方をする。
ここでの例の場合，3企業の3年度ずつの会計データが取得されており，3企業 <span class="math inline">\(\times\)</span> 3年度 <span class="math inline">\(=\)</span> 9つの観測値が存在する。
そのため，9企業年となる。<a href="02-会計データへのアクセス.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>「行」は表の横の並び，「列」は表の縦の並びを示す。行列の覚え方についてはこのウェブページが詳しい。「行列で縦か横か迷ったら」Colorless Green Ideas, <a href="https://id.fnshr.info/2015/10/17/matrix/" class="uri">https://id.fnshr.info/2015/10/17/matrix/</a>, 2021年3月10日閲覧<a href="02-会計データへのアクセス.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>以下の解説は，このウェブページを参考に作成されている。「整然データとは何か」Colorless Green Ideas, <a href="http://id.fnshr.info/2017/01/09/tidy-data-intro/" class="uri">http://id.fnshr.info/2017/01/09/tidy-data-intro/</a>, 2021年3月10日閲覧。<a href="02-会計データへのアクセス.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>値が欠損しているときに使われる記号。Rでは，「NA」とセルに記載されていれば，当該値は「欠損値」として扱われる。ちなみに，NAは，not applicable，あるいはnot availableの略称。<a href="02-会計データへのアクセス.html#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="01-会計情報データを統計分析.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="03-Rの準備.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["下準備.pdf", "下準備.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
